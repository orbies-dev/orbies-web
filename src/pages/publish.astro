---
import Layout from "../layouts/Layout.astro";
import Icon from "../components/Icon.astro";
---

<Layout
  title="Share Your Orb"
  description="Built something small and useful? Share it with the community. Free. Open source."
>
  <!-- Animated Publish Hero -->
  <section class="publish-hero">
    <div class="hero-background">
      <div class="warp-grid"></div>
      <div class="floating-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
        <div class="shape shape-4"></div>
      </div>
      <div class="gradient-mesh"></div>
    </div>

    <div class="container">
      <div class="hero-header">
        <div class="hero-badge fade-in-up">
          <div class="badge-dot"></div>
          <span>Share your work</span>
        </div>
        <h1 class="hero-title">
          <span class="title-line fade-in-up" style="animation-delay: 0.1s"
            >Built an</span
          >
          <span
            class="title-line fade-in-up hero-accent"
            style="animation-delay: 0.2s">Orb?</span
          >
        </h1>
        <p class="hero-subtitle fade-in-up" style="animation-delay: 0.3s">
          Share it with the community. Help others solve the same problem.
        </p>
      </div>
    </div>
  </section>

  <section class="publish-content section-padding">
    <div class="container">
      <div class="form-container">
        <div class="step-indicators">
          <div class="step active" data-step="1">
            <div class="step-number">1</div>
            <div class="step-label">Basic Info</div>
          </div>
          <div class="step" data-step="2">
            <div class="step-number">2</div>
            <div class="step-label">Technical</div>
          </div>
          <div class="step" data-step="3">
            <div class="step-number">3</div>
            <div class="step-label">Media</div>
          </div>
          <div class="step" data-step="4">
            <div class="step-number">4</div>
            <div class="step-label">Philosophy</div>
          </div>
        </div>

        <form id="publishForm">
          <div class="form-step active" data-step="1">
            <h2>Basic info</h2>

            <div class="form-group">
              <label for="appName">Orb name *</label>
              <input
                type="text"
                id="appName"
                name="appName"
                required
                maxlength="50"
                placeholder="e.g., Sentinel, GitStats, QuickNote"
              />
              <span class="char-count">0/50</span>
            </div>

            <div class="form-group">
              <label for="tagline">One-line description *</label>
              <input
                type="text"
                id="tagline"
                name="tagline"
                required
                maxlength="100"
                placeholder="What problem does it solve?"
              />
              <span class="char-count">0/100</span>
            </div>

            <div class="form-group">
              <label for="description">Longer description *</label>
              <textarea
                id="description"
                name="description"
                required
                maxlength="500"
                rows="4"
                placeholder="Explain what it does and why someone would use it"
              ></textarea>
              <span class="char-count">0/500</span>
            </div>

            <div class="form-group">
              <label for="category">Category tags</label>
              <input
                type="text"
                id="category"
                name="category"
                placeholder="productivity, dev-tools, utilities"
              />
              <small>Comma-separated tags</small>
            </div>

            <button type="button" class="btn btn-primary" onclick="nextStep()">
              <span>Continue</span>
              <span class="btn-icon">→</span>
            </button>
          </div>

          <div class="form-step" data-step="2">
            <h2>Technical details</h2>

            <div class="form-group">
              <label for="github">GitHub repository *</label>
              <input
                type="url"
                id="github"
                name="github"
                required
                placeholder="https://github.com/username/repo"
              />
              <small>Must be open source and publicly accessible</small>
            </div>

            <div class="form-group">
              <label>Built with *</label>
              <div class="checkbox-group">
                <label
                  ><input type="checkbox" name="tech" value="Swift" /> Swift</label
                >
                <label
                  ><input type="checkbox" name="tech" value="Rust" /> Rust</label
                >
                <label
                  ><input type="checkbox" name="tech" value="Go" /> Go</label
                >
                <label
                  ><input type="checkbox" name="tech" value="TypeScript" /> TypeScript</label
                >
                <label
                  ><input type="checkbox" name="tech" value="Python" /> Python</label
                >
                <label
                  ><input type="checkbox" name="tech" value="Electron" /> Electron</label
                >
              </div>
            </div>

            <div class="form-group">
              <label>Runs on *</label>
              <div class="checkbox-group">
                <label
                  ><input type="checkbox" name="platform" value="macos" /> macOS</label
                >
                <label
                  ><input type="checkbox" name="platform" value="windows" /> Windows</label
                >
                <label
                  ><input type="checkbox" name="platform" value="linux" /> Linux</label
                >
                <label
                  ><input type="checkbox" name="platform" value="web" /> Web</label
                >
                <label
                  ><input type="checkbox" name="platform" value="cli" /> CLI</label
                >
              </div>
            </div>

            <div class="form-group">
              <label for="buildTime">Build time *</label>
              <select id="buildTime" name="buildTime" required>
                <option value="">How long did it take?</option>
                <option value="under-1-hour">&lt; 1 hour</option>
                <option value="1-3 hours">1-3 hours</option>
                <option value="3-6 hours">3-6 hours</option>
                <option value="1 day">1 day</option>
                <option value="2-3 days">2-3 days</option>
                <option value="under-1-week">&lt; 1 week</option>
              </select>
            </div>

            <div class="form-actions">
              <button
                type="button"
                class="btn btn-secondary"
                onclick="prevStep()"
              >
                <span class="btn-icon">←</span>
                <span>Back</span>
              </button>
              <button
                type="button"
                class="btn btn-primary"
                onclick="nextStep()"
              >
                <span>Continue</span>
                <span class="btn-icon">→</span>
              </button>
            </div>
          </div>

          <div class="form-step" data-step="3">
            <h2>Media</h2>

            <div class="form-group">
              <label for="icon">App Icon/Emoji *</label>
              <input
                type="text"
                id="icon"
                name="icon"
                required
                placeholder="Enter emoji or upload image"
                maxlength="10"
              />
            </div>

            <div class="form-group">
              <label for="screenshot">Screenshot URL</label>
              <input
                type="url"
                id="screenshot"
                name="screenshot"
                placeholder="https://..."
              />
              <small>Link to a hosted screenshot or demo GIF</small>
            </div>

            <div class="form-group">
              <label for="demo">Demo Video URL (Optional)</label>
              <input
                type="url"
                id="demo"
                name="demo"
                placeholder="https://youtube.com/..."
              />
            </div>

            <div class="form-actions">
              <button
                type="button"
                class="btn btn-secondary"
                onclick="prevStep()"
              >
                <span class="btn-icon">←</span>
                <span>Back</span>
              </button>
              <button
                type="button"
                class="btn btn-primary"
                onclick="nextStep()"
              >
                <span>Next</span>
                <span class="btn-icon">→</span>
              </button>
            </div>
          </div>

          <div class="form-step" data-step="4">
            <h2>Final check</h2>
            <p class="philosophy-intro">Confirm your Orb is:</p>

            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" name="philosophy" required />
                Solves one specific problem
              </label>
            </div>

            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" name="philosophy" required />
                Actually works (you tested it)
              </label>
            </div>

            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" name="philosophy" required />
                Free and open source
              </label>
            </div>

            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" name="philosophy" required />
                Simple and focused (no bloat)
              </label>
            </div>

            <div
              class="success-message"
              id="successMessage"
              style="display: none;"
            >
              <h3>Submitted!</h3>
              <p>Thanks for sharing. We'll review and add it soon.</p>
            </div>

            <div class="form-actions">
              <button
                type="button"
                class="btn btn-secondary"
                onclick="prevStep()"
              >
                <span class="btn-icon">←</span>
                <span>Back</span>
              </button>
              <button type="submit" class="btn btn-primary" id="submitBtn">
                <span>Share Orb</span>
                <div class="btn-icon">
                  <Icon name="check" size={16} />
                </div>
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </section>
</Layout>

<style>
  /* ============================================
     FUTURISTIC MINIMALISTIC PUBLISH PAGE
     ============================================ */

  /* Hero Section */
  .publish-hero {
    min-height: 70vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: calc(var(--header-height) + 2rem) 0 3rem;
    position: relative;
    overflow: hidden;
    background: var(--bg-primary);
    color: var(--text-primary);
  }

  /* Hero Background */
  .hero-background {
    position: absolute;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
  }

  /* Animated grid background */
  .warp-grid {
    position: absolute;
    inset: 0;
    background-image: linear-gradient(
        to right,
        rgba(107, 91, 79, 0.05) 1px,
        transparent 1px
      ),
      linear-gradient(to bottom, rgba(107, 91, 79, 0.05) 1px, transparent 1px);
    background-size: 80px 80px;
    animation: warpFloat 30s ease-in-out infinite;
  }

  /* Floating geometric shapes */
  .floating-shapes {
    position: absolute;
    inset: 0;
  }

  .floating-shapes::before,
  .floating-shapes::after,
  .shape-1,
  .shape-2 {
    content: "";
    position: absolute;
    border-radius: 50%;
    background: radial-gradient(
      circle,
      rgba(107, 91, 79, 0.08) 0%,
      transparent 70%
    );
    animation: shapeFloat 20s ease-in-out infinite;
  }

  .floating-shapes::before {
    width: 200px;
    height: 200px;
    top: 10%;
    left: 15%;
    animation-delay: 0s;
  }

  .floating-shapes::after {
    width: 120px;
    height: 120px;
    bottom: 20%;
    right: 10%;
    animation-delay: 5s;
  }

  .shape-1 {
    width: 80px;
    height: 80px;
    top: 60%;
    left: 70%;
    animation-delay: 10s;
  }

  .shape-2 {
    width: 140px;
    height: 140px;
    bottom: 40%;
    left: 30%;
    animation-delay: 15s;
  }

  /* Gradient mesh overlay */
  .gradient-mesh {
    position: absolute;
    inset: 0;
    background: radial-gradient(
        circle at 20% 50%,
        rgba(107, 91, 79, 0.06) 0%,
        transparent 50%
      ),
      radial-gradient(
        circle at 80% 80%,
        rgba(107, 91, 79, 0.04) 0%,
        transparent 50%
      ),
      radial-gradient(
        circle at 40% 20%,
        rgba(107, 91, 79, 0.05) 0%,
        transparent 50%
      );
    animation: meshShift 25s ease-in-out infinite;
  }

  /* Hero Header */
  .hero-header {
    text-align: center;
    position: relative;
    z-index: 10;
    max-width: 900px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 2rem;
    align-items: center;
  }

  /* Hero Badge */
  .hero-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: var(--bg-glass);
    backdrop-filter: blur(var(--blur-md));
    border: 1px solid rgba(107, 91, 79, 0.2);
    border-radius: 2rem;
    font-size: 0.875rem;
    color: var(--text-secondary);
    animation: fadeInUp 0.8s ease-out;
  }

  .badge-dot {
    width: 8px;
    height: 8px;
    background: var(--accent);
    border-radius: 50%;
    animation: pulse 2s ease-in-out infinite;
  }

  /* Title Line */
  .title-line {
    animation: fadeInUp 0.8s ease-out 0.2s both;
  }

  .hero-title {
    font-size: clamp(2.75rem, 8vw, 4.5rem);
    margin: 0;
    color: var(--text-primary);
    font-weight: 700;
    letter-spacing: -0.04em;
    line-height: 1.05;
  }

  .hero-accent {
    color: var(--accent);
    position: relative;
  }

  .hero-subtitle {
    font-size: clamp(1rem, 2vw, 1.125rem);
    color: var(--text-secondary);
    font-weight: 400;
    letter-spacing: -0.01em;
    max-width: 600px;
    margin: 0;
    line-height: 1.5;
    animation: fadeInUp 0.8s ease-out 0.4s both;
  }

  /* Animations */
  @keyframes warpFloat {
    0%,
    100% {
      transform: perspective(1000px) rotateX(0deg) translateY(0);
    }
    50% {
      transform: perspective(1000px) rotateX(2deg) translateY(-10px);
    }
  }

  @keyframes shapeFloat {
    0%,
    100% {
      transform: translate(0, 0) scale(1);
      opacity: 0.6;
    }
    33% {
      transform: translate(20px, -20px) scale(1.1);
      opacity: 0.8;
    }
    66% {
      transform: translate(-20px, 20px) scale(0.9);
      opacity: 0.7;
    }
  }

  @keyframes meshShift {
    0%,
    100% {
      transform: translate(0, 0);
    }
    33% {
      transform: translate(5%, -5%);
    }
    66% {
      transform: translate(-5%, 5%);
    }
  }

  @keyframes pulse {
    0%,
    100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.6;
      transform: scale(1.2);
    }
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Content Section */
  .publish-content {
    background: var(--bg-secondary);
    position: relative;
    min-height: 100vh;
    padding: var(--space-24) 0;
  }

  .form-container {
    max-width: 900px;
    margin: 0 auto;
    background: var(--bg-glass);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-2xl);
    backdrop-filter: blur(var(--blur-md));
    -webkit-backdrop-filter: blur(var(--blur-md));
    padding: var(--space-24);
    position: relative;
    z-index: 1;
    transition: all var(--transition-normal);
    box-shadow: var(--shadow-lg);
  }

  .form-container:hover {
    background: var(--bg-glass-strong);
    border-color: var(--border-strong);
    box-shadow: var(--shadow-xl);
  }

  /* Step Indicators */
  .step-indicators {
    display: flex;
    justify-content: space-between;
    margin-bottom: var(--space-24);
    position: relative;
  }

  .step-indicators::before {
    content: "";
    position: absolute;
    top: 20px;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent,
      var(--color-future-blue-glow) 20%,
      var(--color-future-blue) 50%,
      var(--color-future-blue-glow) 80%,
      transparent
    );
    z-index: 0;
  }

  .step {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-3);
    position: relative;
    z-index: 1;
  }

  .step-number {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: var(--bg-glass);
    border: 1px solid var(--border-primary);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    color: var(--text-secondary);
    transition: all var(--transition-normal);
    font-size: var(--font-size-sm);
    backdrop-filter: blur(var(--blur-sm));
    -webkit-backdrop-filter: blur(var(--blur-sm));
  }

  .step.active .step-number {
    border-color: var(--color-future-blue);
    color: var(--color-future-blue-dark);
    background: var(--color-future-blue-glow);
    box-shadow: 0 0 0 3px rgba(99, 179, 237, 0.2);
  }

  .step-label {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    font-weight: 500;
    text-align: center;
  }

  .step.active .step-label {
    color: var(--text-primary);
    font-weight: 600;
  }

  /* Form Steps */
  .form-step {
    display: none;
  }

  .form-step.active {
    display: block;
    animation: fadeInUp 0.6s var(--ease-apple) forwards;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .form-step h2 {
    margin-bottom: var(--space-20);
    color: var(--text-primary);
    font-size: var(--font-size-3xl);
    font-weight: 700;
    letter-spacing: -0.03em;
  }

  /* Form Elements */
  .form-group {
    margin-bottom: var(--space-6);
  }

  .form-group label {
    display: block;
    margin-bottom: var(--space-3);
    color: var(--text-primary);
    font-weight: 600;
    font-size: var(--font-size-base);
  }

  .form-group input[type="text"],
  .form-group input[type="url"],
  .form-group select,
  .form-group textarea {
    width: 100%;
    padding: var(--space-4) var(--space-5);
    background: var(--bg-glass);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-lg);
    color: var(--text-primary);
    font-size: var(--font-size-base);
    outline: none;
    transition: all var(--transition-normal);
    font-family: inherit;
    letter-spacing: -0.01em;
    backdrop-filter: blur(var(--blur-sm));
    -webkit-backdrop-filter: blur(var(--blur-sm));
  }

  .form-group input:focus,
  .form-group select:focus,
  .form-group textarea:focus {
    border-color: var(--color-future-blue);
    background: var(--bg-glass-strong);
    box-shadow: 0 0 0 3px var(--color-future-blue-glow);
  }

  .form-group input::placeholder,
  .form-group textarea::placeholder {
    color: var(--text-secondary);
    opacity: 0.7;
  }

  .char-count {
    display: block;
    text-align: right;
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-top: var(--space-2);
    font-weight: 500;
  }

  .form-group small {
    display: block;
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
    margin-top: var(--space-2);
  }

  /* Checkbox Groups */
  .checkbox-group {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: var(--space-4);
  }

  .checkbox-group label {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    cursor: pointer;
    font-weight: 500;
    padding: var(--space-4);
    border-radius: var(--radius-md);
    transition: all var(--transition-normal);
    background: var(--bg-glass);
    border: 1px solid var(--border-primary);
    backdrop-filter: blur(var(--blur-sm));
    -webkit-backdrop-filter: blur(var(--blur-sm));
  }

  .checkbox-group label:hover {
    background: var(--bg-glass-strong);
    border-color: var(--border-strong);
    transform: translateY(-1px);
    box-shadow: var(--shadow-sm);
  }

  .checkbox-group input[type="checkbox"] {
    width: 16px;
    height: 16px;
    cursor: pointer;
    accent-color: var(--color-future-blue);
  }

  .checkbox-label {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    padding: var(--space-5);
    background: var(--bg-glass);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-normal);
    font-weight: 500 !important;
    backdrop-filter: blur(var(--blur-sm));
    -webkit-backdrop-filter: blur(var(--blur-sm));
  }

  .checkbox-label:hover {
    border-color: var(--color-future-blue);
    background: var(--bg-glass-strong);
    transform: translateY(-1px);
    box-shadow: var(--shadow-sm);
  }

  .checkbox-label input[type="checkbox"] {
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: var(--color-future-blue);
  }

  .philosophy-intro {
    color: var(--text-secondary);
    margin-bottom: var(--space-6);
    font-size: var(--font-size-lg);
  }

  /* Form Actions */
  .form-actions {
    display: flex;
    gap: var(--space-4);
    margin-top: var(--space-16);
  }

  /* Success Message */
  .success-message {
    background: var(--bg-glass-strong);
    border: 1px solid var(--color-future-blue-glow);
    border-radius: var(--radius-xl);
    padding: var(--space-8);
    text-align: center;
    margin: var(--space-6) 0;
    backdrop-filter: blur(var(--blur-md));
    -webkit-backdrop-filter: blur(var(--blur-md));
    box-shadow:
      var(--shadow-lg),
      0 0 20px var(--color-future-blue-glow);
  }

  .success-message h3 {
    color: var(--color-future-blue);
    margin-bottom: var(--space-3);
    font-size: var(--font-size-2xl);
    font-weight: 600;
  }

  .success-message p {
    color: var(--text-secondary);
    margin: 0;
  }

  /* Buttons */
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    padding: var(--space-3) var(--space-6);
    border-radius: var(--radius-lg);
    font-size: var(--font-size-base);
    font-weight: 600;
    text-decoration: none;
    cursor: pointer;
    transition: all var(--transition-normal);
    border: none;
    white-space: nowrap;
    position: relative;
    overflow: hidden;
    letter-spacing: -0.01em;
  }

  .btn-primary {
    background: linear-gradient(
      135deg,
      var(--color-future-blue),
      var(--color-future-blue-dark)
    );
    color: white;
    box-shadow: var(--shadow-sm);
  }

  .btn-primary::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.2),
      transparent
    );
    transition: left 0.6s var(--ease-apple);
  }

  .btn-primary:hover::before {
    left: 100%;
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow:
      var(--shadow-md),
      0 0 15px var(--color-future-blue-glow);
  }

  .btn-secondary {
    background: var(--bg-glass);
    color: var(--text-primary);
    border: 1px solid var(--border-primary);
    backdrop-filter: blur(var(--blur-sm));
    -webkit-backdrop-filter: blur(var(--blur-sm));
  }

  .btn-secondary:hover {
    background: var(--bg-glass-strong);
    border-color: var(--border-strong);
    transform: translateY(-1px);
    box-shadow: var(--shadow-sm);
  }

  .btn-icon {
    transition: transform var(--transition-normal);
  }

  .btn:hover .btn-icon {
    transform: scale(1.1);
  }

  /* Section divider */
  .section-divider {
    margin: var(--space-16) 0;
  }

  /* ============================================
     RESPONSIVE DESIGN
     ============================================ */
  @media (max-width: 1024px) {
    .checkbox-group {
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    }
  }

  @media (max-width: 768px) {
    .publish-hero {
      min-height: 60vh;
      padding: calc(var(--header-height) + 1.5rem) 0 2rem;
    }

    .hero-header {
      gap: 1.5rem;
    }

    .form-container {
      padding: var(--space-16) var(--space-4);
      border-radius: var(--radius-xl);
    }

    .hero-title {
      font-size: clamp(2.25rem, 10vw, 3rem);
    }

    .step-label {
      display: none;
    }

    .checkbox-group {
      grid-template-columns: 1fr;
    }

    .form-actions {
      flex-direction: column;
    }

    .step-indicators {
      margin-bottom: var(--space-16);
    }

    .warp-grid {
      background-size: 60px 60px;
    }
  }

  @media (max-width: 480px) {
    .hero-title {
      font-size: clamp(1.875rem, 12vw, 2.5rem);
    }

    .hero-subtitle {
      font-size: clamp(0.9375rem, 3vw, 1rem);
    }

    .form-step h2 {
      font-size: var(--font-size-2xl);
    }

    .form-container {
      padding: var(--space-12) var(--space-3);
    }
  }

  /* ============================================
     ACCESSIBILITY
     ============================================ */
  @media (prefers-reduced-motion: reduce) {
    .warp-grid,
    .floating-shapes::before,
    .floating-shapes::after,
    .shape-1,
    .shape-2,
    .gradient-mesh,
    .badge-dot,
    .hero-badge,
    .title-line,
    .hero-subtitle,
    .form-step.active {
      animation: none !important;
    }

    .btn:hover,
    .checkbox-group label:hover,
    .checkbox-label:hover {
      transform: none;
    }

    .form-step.active {
      opacity: 1;
      transform: none;
    }
  }

  /* Focus states */
  .btn:focus-visible {
    outline: 2px solid var(--color-future-blue);
    outline-offset: 2px;
  }

  .form-group input:focus-visible,
  .form-group select:focus-visible,
  .form-group textarea:focus-visible {
    outline: 2px solid var(--color-future-blue);
    outline-offset: 2px;
  }
</style>

<script>
  let currentStep = 1;

  (window as any).nextStep = function () {
    if (currentStep < 4) {
      currentStep++;
      updateSteps();
    }
  };

  (window as any).prevStep = function () {
    if (currentStep > 1) {
      currentStep--;
      updateSteps();
    }
  };

  function updateSteps() {
    document.querySelectorAll(".step").forEach((step, index) => {
      if (index + 1 <= currentStep) {
        step.classList.add("active");
      } else {
        step.classList.remove("active");
      }
    });

    document.querySelectorAll(".form-step").forEach((step, index) => {
      if (index + 1 === currentStep) {
        step.classList.add("active");
      } else {
        step.classList.remove("active");
      }
    });
  }

  document
    .querySelectorAll("input[maxlength], textarea[maxlength]")
    .forEach((element) => {
      const input = element as HTMLInputElement | HTMLTextAreaElement;
      const maxLength = parseInt(input.getAttribute("maxlength") || "0");
      const charCount = input.parentElement?.querySelector(".char-count");

      if (charCount) {
        input.addEventListener("input", () => {
          charCount.textContent = `${input.value.length}/${maxLength}`;
        });
      }
    });

  const form = document.getElementById("publishForm") as HTMLFormElement;
  form?.addEventListener("submit", (e) => {
    e.preventDefault();
    const submitBtn = document.getElementById("submitBtn") as HTMLButtonElement;
    const successMessage = document.getElementById(
      "successMessage"
    ) as HTMLElement;

    submitBtn.textContent = "Submitting...";
    submitBtn.disabled = true;

    setTimeout(() => {
      successMessage.style.display = "block";
      submitBtn.style.display = "none";
      form.reset();
    }, 1500);
  });
</script>
